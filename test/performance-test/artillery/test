config:
  target: "localhost:8081"
  phases:
    - duration: 10
      arrivalCount: 10
  environments:
    localhost:
      target: "http://localhost:8081"
      phases:
        - duration: 10
          arrivalCount: 10
    testnet:
      target: "https://explorer.cardano-testnet.iohkdev.io/rosetta"
      phases:
        - duration: 120
          arrivalRate: 10
  payload:
    path: "{{  $environment  }}-vars.csv"
    fields:
      - "networkId"
      - "blockIndex"
      - "blockHash"
scenarios:
  - flow:
      - log: "/block"
      - log: "{{ blockIndex }}"
      - post:
          url: "/block"
          headers:
            Content-Type: "application/json"
          json:
            network_identifier:
              blockchain: "cardano"
              network: "{{ networkId }}"
            block_identifier:
              index: "{{  blockIndex }}"
              hash: "{{  blockHash }}"
